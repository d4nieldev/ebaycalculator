{% extends 'base.html' %}
{% load static %}
{% load filters %}
{% block title %}Panel{% endblock %}
{% block head %}
<script src="{% static 'js/panel.js' %}" type="text/javascript"></script>
{% endblock %}
{% block content %}

{% include 'modals/hipshipper.html' %}
<div class="container-fluid my-3">
    <!--Filter Sales-->
    <form id="form_filter_sales">
        {% csrf_token %}
        <div class="row mb-3">
            <div class="col-2">
                <select class='form-select' name="s_filter_sales_by_date" id="s_sales_filter_by_date">
                    <option value="all">All sales</option>
                    {% for year, month_list in years_months.items %}
                        {% for month in month_list %}
                            {% if user_sales_filtered_y == year and user_sales_filtered_m == month %}
                                <option value="{{ year }}-{{ month }}" selected>{{ year }}-{{ month }}</option>
                            {% else %}
                                <option value="{{ year }}-{{ month }}">{{ year }}-{{ month }}</option>
                            {% endif %}
                        {% endfor %}
                    {% endfor %}
                </select>
            </div>
            
            <div class="col-1">
                <input type="submit" class="btn btn-secondary" name="btn_select_date" value="Filter">
            </div>
            <span class='col-5'>
                <span class="display-6">Triplemars Status: </span>
                <span id="div_user_balance" class="display-6">${{ user_balance|roundFloat:2 }}</span>
            </span>
            <div class="col-1">
                <div id="sales-count" class="text-center rounded bg-info py-1 fw-bold text-dark"></div>
            </div>
            <div class="col-1">
                <div id="ebay-bill" class="text-center rounded bg-danger py-1 fw-bold text-dark"></div>
            </div>
        </div>
    </form>

    {% include 'sales_table.html' %}

    <!--Sale Registered Message-->
    {% for message in messages %}
        {% if message.tags == 'info' %}
            <p class='alert alert-info mt-3'>{{ message }}</p>
        {% endif %}
    {% endfor %}
</div>

{% endblock %}